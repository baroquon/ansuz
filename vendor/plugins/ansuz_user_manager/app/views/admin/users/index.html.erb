<%= title "Users" -%>

<% content_for :sidebar do -%>
  <%= link_to "Add User", new_admin_user_path, :class => 'button icon add' -%>
  <div class='note'>
    Right now the only users that exist are able to log in to the admin section.  Soon we'll need site-users, and <%= link_to "the Access Control Layer will need to be built.", "http://ansuz.lighthouseapp.com/projects/15780-ansuz/tickets/9-build-the-access-control-layer" %>  I intend this to be role-based, and built around the authorization plugin because of its fine granularity. I would want to be able to allow a plugin to programatically manage access to a page, etc.
  </div>
<% end -%>

<div class='fullwidth'>
  <table class='subdued'>
    <thead>
      <tr>
        <th></th>
        <th>Username</th>
        <th>Email</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| -%>
        <tr class='<%= cycle('odd', 'even') -%>'>
          <td><%= content_tag(:div, gravatar_tag(user.email)) if user.email %></td>
          <td><%= link_to user.login, edit_admin_user_path(user) -%></td>
          <td><%= mail_to user.email -%></td>
          <td>
            <ul class='admin_actions'>
              <li><%= link_to famfamfam_icon("pencil"), edit_admin_user_path(user) -%></li>
              <li><%= link_to famfamfam_icon("delete"), admin_user_path(user), :method => :delete, :confirm => "Are you sure you want to delete this user?" -%></li>
            </ul>
          </td>
        </tr>
      <% end -%>
    </tbody>
  </table>
</div>
